---
title: node.js 筆記 5 - 使用 template engine (pug)
date: 2019-10-30 07:32:45
tags:
  - Node
categories: 前端
---

在回傳頁面資料時，通常都會使用到模板引擎，這種檔案內容只會運行在後端經過編譯後才會轉成 HTML 檔案，而這種檔案比較方便的地方在於可以將資料動態加入至這些模板引擎當中進行編譯，再回傳給用戶端，而通常來講 node.js 比較常用的為 pug 以及 ejs。

## pug
在設定模版引擎時，必須要讓 express 知道目前要使用哪一種編譯方式，這個屬性要這樣定義。

``` JavaScript
app.set('view engine', 'pug');
app.set('views', 'views');
```

最後回傳頁面時要使用 `res.render`

``` JavaScript
const path = require('path');

const products = [];

exports.getAddProducts = (req, res, next) => {
  res.render('about');
}
exports.products = products;
```

如果說要把資料帶入至頁面當中，則可以把資料加在 render 的第二個參數

``` JavaScript
res.render('about', { data: [1, 2], title: '關於我們' });
```

pug

``` pug
<!DOCTYPE html>
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    meta(http-equiv="X-UA-Compatible", content="ie=edge")
    title #{title}
  body
    span 關於我們
    if data.length > 0
      span 有資料
    else
      span 沒資料
```

### 共用模板
在 pug 可以支援將一些共用的模板拆出來共用。

Layout 
``` HTML
<!DOCTYPE html>
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        meta(http-equiv="X-UA-Compatible", content="ie=edge")
        title #{pageTitle}
        link(rel="stylesheet", href="/css/main.css")
    body   
        span 共用模板
        block content
```

about.pug
```
extends ./layout.pug

block content
  span 關於我們
```