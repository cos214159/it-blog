---
title: webpack 筆記 (12) - Shimming
date: 2019-09-24 16:01:49
tags: 
  - webpack
categories: 前端
---

![Alt text](https://firebasestorage.googleapis.com/v0/b/it-blog-a274d.appspot.com/o/shimming.png?alt=media&token=6a635899-d5cb-4901-bbf8-6e9dc29c8cc8)

這個情境是在於說，縱使我們現在有 Code splitting 的幫忙，可以將多個檔案的 library 抽出來共用，但如果想要把一個函式庫抽出來變成全域的物件，讓其他檔案就算沒有引入還是可以使用的話，可以使用 Shimming。

以上面的檔案為例，最左邊的檔案有引入 jquery，然後其他兩支沒有引入 jquery，但直接使用 $ 關鍵字預設是會出錯的，這個時候可以增加 shimming 設定。

``` JavaScript
plugins: [
  new CleanWebpackPlugin(),
  new HtmlWebpackPlugin({
    title: '首頁',
    excludeAssets: [/style.*.js/],
    filename: 'index.html',
    template: './index.html'
  }),
  new webpack.ProvidePlugin({
    $: 'jquery'
  })
]
```

Shimming 需要設定在 plugins 裡面，上面的webpack.ProvidePlugin 就是設定 Shimming 的物件，如此便能將 jquery 獨立抽出來變成全域物件，讓所有在不同的 javaScript 檔案都可以使用，即便沒有引入也可以。

範例程式碼 : https://github.com/cos214159/webpack-tutorial/tree/master/chapter12-shimming