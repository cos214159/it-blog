---
title: webpack 筆記 (6) -  tree shaking 和 Side effect
date: 2019-09-18 16:55:38
tags: 
  - webpack
categories: 前端
---

這個概念其實如同字面上的意思，把樹搖晃之後，會把一些物件抖落至地面，轉換到程式碼裡面意思是，Webpack 打包程式碼的時候，會去看有哪一些程式碼目前是沒有在使用的，便不會將這些程式碼打包輸出，可是這個設定只有在 production mode 底下才會有效

比方說我先定義一個 function

``` JavaScript
export default function () {
  console.log('a');
}
```

然後在 entry 檔案引入，若是我沒有呼叫 fun() 這段程式碼是不會被打包到輸出檔案裏面去的，整體上會讓我們的專案更小

``` JavaScript
import fun from './js/a';
import './js/b';
import './js/c';
import './css/a.css';
import './css/b.css';
import './css/c.css';
fun();
```

## Side Effect (副作用)
這個設定是，當我們在引入某些套件時，若是在這個套件底下有一些程式碼雖然沒有執行到，但還是會跟著打包輸出時，這個設定可以避免掉這件事情。

``` JavaScript
export default function() {
  console.log('new_module');
};
console.log('new_module: side effect ');
```

entry 程式碼

``` JavaScript
import a_new_module from 'a_new_module';
a_new_module();
```

這段程式碼在引入過後，Webpack 在打包時，會把這一段 也一起打包至程式碼裡面，而這一段程式碼應該是沒有任何用處的，要讓 Webpack 在打包時，可以再特別檢查這一段，可以在 package.json 裡面加上

``` JavaScript
console.log('new_module: side effect ');
```

這時候可以在 package.json 裡面加上 ，讓 Webpack 在打包時可以檢查是否有沒有作用的程式碼，進而不要一起打包至輸出檔案中

``` JavaScript
"sideEffects": false
```

範例程式碼 : https://github.com/cos214159/webpack-tutorial/tree/master/chapter6-tree-shaking