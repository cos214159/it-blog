---
title: webpack 筆記 (15) - Babel-loader
date: 2019-09-29 20:36:50
tags: 
  - webpack
categories: 前端
---

Webpack 在預設上雖然可以幫我們打包 JavaScript 的檔案，但是卻不能將 ES6 的語法轉換為 ES5 的語法，因此會需要安裝額外套件 babel-loader 將 JavaScript 檔案引入，如果有 ES6 的語法可以再幫助我們轉換成 ES5。

首先要先安裝 babel-loader 套件，可以將同時將我們的程式碼如果有 ES6 的語法可以轉換成 ES5，也可以做 polyfill，也有程式碼打包的功能。

```
npm i --save-dev babel-loader
```

除此之外也必須安裝幾個相依的套件

```
npm i --save-dev @babel/core @babel/preset-env @babel/plugin-transform-runtime
npm i --save @babel/runtime
```

跟上一篇講的 babel 套件相比，Webpack 可以啟用 babel，所以我們不需要安裝 @babel/cli 套件。

而 @babel/polyfill 則是被 @babel/plugin-transform-runtime 和 @babel/runtime 取代，看到網路上的說法大致上是整體的打包效率會比 polyfill 好的多，因為如果引入 polyfill 他會讓我們的專案有很多重複的程式碼。

而下載 babel 之後，要來設定一下設定檔

``` JavaScript
module: {
........
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: {
          loader: 'babel-loader',
          options: {
            presets: ['@babel/preset-env'],
            plugins: [
              '@babel/plugin-transform-runtime',
            ]
          }
        }
      }
    ]
.............
  },
```

* exclude 是我們不想要讓 babel 去轉換 node_modules 的程式碼，可以特別註記在這個地方
* options 裡面則是可以設定兩個屬性，presets 和 plugins

presets 可以讓我們不用針對自己所撰寫的程式碼，手動去引入相關的 plugins 進來

而 plugins 裡面 @babel/plugin-transform-runtime 可以用更有效率的方式引入 polyfill 函式庫。

範例程式碼 : https://github.com/cos214159/webpack-tutorial/tree/master/chapter15-babel-loader
