---
title: Electron - 4 Main Process API
date: 2020-01-12 09:32:07
tags:
  - Electron
categories: 前端
---

Electron 有分為 Main Process 和 Renderer Process，而 Electron 有分別提供對應的 API 可以讓我們使用，以下分別來看

## APP
https://electronjs.org/docs/api/app 
在這個文件上有附註很多關於 app 的 API 使用方法，

* before-quit 在視窗關閉時會觸發
* isReady() 當 app 初始化完成時，調用會回傳 true，否則回傳 false

## BrowserWindow
建立及控制瀏覽器視窗，詳細的文件  https://electronjs.org/docs/api/browser-window

* ready-to-show 當畫面已經渲染完成的時候，會觸發該事件，我們可以在這個事件觸發時才將視窗顯示

### 子母畫面
Electron 是由一個 Main Process，和無數的 Renderer Process 組成，每個 Renderer Process 負責一個視窗，而這些視窗之間可以有相依性，在關閉時可以帶動底下的子畫面也一起被關掉，

設定上要在子畫面使用 `parent: mainWindow` 這個屬性，標記該視窗是掛在哪個主視窗之下，

``` js
  // 建立瀏覽器視窗。
  mainWindow = new BrowserWindow({
    width: 1000,
    height: 800,
    webPreferences: {
      nodeIntegration: true
    }
  })

  secondaryWindow = new BrowserWindow({
    width: 600,
    height: 300,
    webPreferences: {
      nodeIntegration: true
    },
    parent: mainWindow
  })
```

### frameless window
可以在建立 `BrowserWindow` instance 的時候，下這個屬性，這樣便不會視窗就不會有工具列
``` js
frame: false
```

### mainBrowser option
https://electronjs.org/docs/api/browser-window#new-browserwindowoptions
在建立 mainBrowser 時可以設定一些參數，比方說 blur、focus ... 等

## browserWindow - webContents
在 browserWindow 是由 chromium 負責處理，而內部是 webContents，以下為一些 api 的說明

* did-finish-load: 是在畫面 render 完成後，以及所有的資源都載入完成後會調用的 callback
* dom-ready: 在畫面 render 完成後
* new-window 是當有另開新畫面時會觸發的事件
* context-menu 是當我們點擊右鍵時提供 callback 的 api
* 

