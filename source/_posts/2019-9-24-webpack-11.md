---
title: webpack 筆記 (11) - Lazy Loading
date: 2019-09-24 15:58:38
tags: 
  - webpack
categories: 前端
---

可以看看如下的程式碼，當我們在按下 login 按鈕時，會調用 login()，而當我們按下 register 的時候會調用 register()，這樣撰寫的缺點就是當我們如果都沒有按下這兩個按鈕時，其實 login 和 register 的程式碼還是會被載入，只是沒有被調用，這樣也是會造成一些資源的浪費。

而 Lazy Loading 就是可以讓我們在執行某些程式的時候，再將這一些程式碼載入到專案裡面，可以減少一些 loading。

``` JavaScript
import $ from 'jquery';
import login from './js/login';
import register from './js/register';
$('#login').click(function(){
  login();
});
$('#register').click(function(){
  register();
})
```

改善的方法如下，可以看到我把 login 和 register 的 import 都註解掉了，而底下這段語法真心認為有夠畸形
* import().then() 是動態載入函式的方法
* /* webpackChunkName: login */ 是當 Webpack 在打包時會將這一段 function 抽離成單一一個 .js 檔，後面的 .js/login.js 則是實際這個 function 的檔案位置，當這段程式碼被載入之後，會回傳一個物件 module，我們可以使用這個 module 去調用相對應的 function

如此便不用在還沒有使用到這個 function 之前就全部載入，而是在需要的時候去調用他

``` JavaScript
import $ from 'jquery';
// import login from './js/login';
// import register from './js/register';
$('#login').click(function(){
  import(/*webpackChunkName:'login'*/'./js/login.js')
    .then(function(module){
      module.default();
    });
});
$('#register').click(function(){
  import(/*webpackChunkName:'register'*/'./js/register.js')
    .then(function(module){
      module.default();
    })
})
```

範例程式碼 : https://github.com/cos214159/webpack-tutorial/tree/master/chapter11-lazy-loading