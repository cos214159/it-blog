---
title: Electron - 7 Menu、contextMenu、Tray
date: 2020-01-23 12:54:51
tags:
  - Electron
categories: 前端
---

Electron 提供給我們跨作業系統的選單 api，可以這樣做

``` js
const {app, BrowserWindow, Menu, MenuItem} = require('electron')

let mainMenu = new Menu()
let menuItem1 = new MenuItem({ label: 'Electron', submenu: [
    { label: 'Item 1'},
    { label: 'Item 2', submenu: [{ 
      label: 'subMenu', 
      click: () => { console.log('Hello from Main Menu') }, 
      accelerator: 'Shift+Alt+G'
    }]},
    { label: 'Item 3', enable: false},
    {
      label: '全螢幕', 
      role: 'toggleFullScreen'
    }
  ] 
})

mainMenu.append(menuItem1)


Menu.setApplicationMenu(mainMenu)

```

基本上 Electron 提供的選單 api 是很完整的，可以用很簡單的方式設定子選單，或者內建功能，像是全螢幕、redo、undo 這類的功能

## 右鍵選單
Electron 也有提供右鍵選單，使用的方法為

``` js
let contextMenu = Menu.buildFromTemplate([
  { label: 'Item 1' },
  { role: 'editMenu' }
])

mainWindow.webContents.on('context-menu', e=> {
  contextMenu.popup()
})

```

## 工具列

``` js
let trayMenu = Menu.buildFromTemplate([
  { label: 'Item 1' },
  { role: 'quit' }
])

function createTray() {

  tray = new Tray('trayTemplate@2x.png')
  tray.setToolTip('Tray details')

  tray.on('click', e => {

    if (e.shiftKey) {
      app.quit()
    } else {
      mainWindow.isVisible() ? mainWindow.hide() : mainWindow.show()
    }
  })

  tray.setContextMenu(trayMenu)
}

```