---
title: Nuxt 筆記 3 - async data
date: 2019-11-03 22:33:15
tags:
  - Vue
  - Nuxt
categories: 前端
---

asyncData 會在 component 被載入前被使用，可以呼叫 API 並且等 API 有結果之後才將頁面回傳至 client 端，作法上可以使用 nuxt 提供的 callback 在非同步行為回傳時調用，或者是 promise，此時才會將 component 載入，

``` JavaScript
<script>
export default {
    layout: 'users',
    asyncData(context, callback) {
        console.log('asyncData')
        setTimeout(() => {
            callback(null, {
                data: 10
            })
        }, 1500);
    },
    created() {
        console.log('created')
    },
}
</script>
```

而 SSR 之間有提到過，只會在第一次回傳頁面時才會在後端進行畫面渲染，之後都是靠 Vue 去切換版面，而 asyncData 在第一次頁面載入時不會在 browser 上印出文字而是會在編輯器上印出文字，之後就都會在瀏覽器上印出文字

### context
context 這個物件包含了非常多的資訊，比方說目前是在 server 或 client 端執行或是可以取得 query 參數以及 params ... 等